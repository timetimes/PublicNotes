# c

C 语言是一种通用的、面向过程式的计算机程序设计语言。

```c
#include <stdio.h>
 
int main() {
   printf("Hello, World! \n");
   return 0;
}
```

**所有的 C 语言程序都需要包含 main() 函数** 代码从 main() 函数开始执行
`// 单行注释` `/* 多行注释 */` 用于注释说明

在行末尾添加反斜杠（\）可以将代码分成多行。

**编译 & 执行 C 程序**：请确保您的路径中已包含gcc编译器(或配置环境变量)，并确保在包含源文件test.c的目录中运行

1. 使用文本编辑器编写代码，并保存为 `.c`文件
2. 终端输入 `gcc test.c`编译为可执行文件(默认文件名为a,windows为 `a.exe`;linux为 `a.out`)
   如果是多个c代码的源码文件，编译方法 `gcc test1.c test2.c -o main`(-o指定生成文件名为main，自动根据系统生成mian.exe/main.out。当然也可以指定后缀名如main.txt，虽然没必要)
3. 终端输入 `./a.exe`或 `./a.out`执行程序

动态链接库（Dynamic Link Library ）是一种不可执行的二进制程序文件，它允许多个程序共享执行特殊任务所必需的代码和其他资源。Windows 中，DLL 多数情况下是带有 ".dll" 扩展名的文件，但也可能是 ".ocx"或其他扩展名；Linux系统中常常是 ".so" 的文件。动态链接提供了一种方法，使进程可以调用不属于其可执行代码的函数。函数的可执行代码位于一个 DLL 文件中，该 DLL 包含一个或多个已被编译、链接并与使用它们的进程分开存储的函数。DLL 还有助于共享数据和资源。多个应用程序可同时访问内存中单个 DLL 副本的内容。使用动态链接库可以更为容易地将更新应用于各个模块，而不会影响该程序的其他部分。几个应用程序在使用同一个共享的DLL库时可能发生版本冲突。
编译为动态库文件(.so结尾) `gcc test.c -shared -o test.so`

Windows系统下默认控制台编码格式为936(ANSI/OEM - 简体中文 GBK)，而C程序文件默认编码格式为utf-8，由于编码格式不一致，程序运行时往往会出现中文乱码的情况
增添头文件 `#include <windows.h>`，并添加 `SetConsoleOutputCP(65001);`，设置控制台程序输出的代码页编码为utf-8格式

---

直接双击运行c程序，运行窗口通常会在程序执行完毕后自动关闭。这是因为在Windows等操作系统中，当程序的主函数返回时，系统会认为程序已经执行完毕，于是自动关闭程序窗口。可以在控制台窗口或IDLE环境中运行调试，但是如果需要双击运行c程序不关闭运行窗口，可以：

`getchar();` 直到用户输入一个字符并按下回车键为止
`system("pause");` 等待用户按下任意键后才能继续执行
使用死循环 直到用户手动关闭程序窗口为止

## C 基本语法

- C 程序由各种令牌(Token)组成，令牌可以是关键字、标识符、常量、字符串值，或者是一个符号。
- 在 C 程序中，分号是语句结束符。也就是说，每个语句必须以分号结束。它表明一个逻辑实体的结束。
- C 标识符是用来标识变量、函数，或任何其他用户自定义项目的名称。一个标识符以字母 A-Z 或 a-z 或下划线 _ 开始，后跟零个或多个字母、下划线和数字（0-9）。C 标识符内不允许出现标点字符，比如 @、$ 和 %。C 是区分大小写的编程语言。
- C语言的保留字不能作为常量名、变量名或其他标识符名称。
- 空格用于描述空白符、制表符、换行符和注释。空格分隔语句的各个部分，让编译器能识别语句中的某个元素（比如 int）在哪里结束，下一个元素在哪里开始。

### 数据类型

数据类型指的是用于声明不同类型的变量或函数的一个广泛的系统。变量的类型决定了变量存储占用的空间，以及如何解释存储的位模式。

各种类型的存储大小与系统位数有关，目前通用的以64位系统为主。为了得到某个类型或某个变量在特定平台上的准确大小，可以使用 `sizeof(type)` 得到对象或类型的存储字节大小。

c语言每种类型占用空间都很明确，没有判断变量类型的函数
但是有可能找不到定义变量的代码位置，或者不确定是否进行了类型转换，可以简单利用sizeof()或者ASCII码辅助判断

- 基本数据类型:算术类型，包括整型（int）、字符型（char）、浮点型（float）和双精度浮点型（double）
- 枚举类型:算术类型，被用来定义在程序中只能赋予其一定的离散整数值的变量
- void 类型:void 表示没有值的数据类型，通常用于函数返回值
- 派生类型:包括数组类型、指针类型和结构体类型

在 C 语言标准(C89)没有定义布尔类型，所以 C 语言判断真假时以 0 为假，非 0 为真。可以利用宏定义：

```c
#define BOOL int
#define TRUE 1
#define FALSE 0
```

但在编译器看来依然是 int 类型，没有根本改变
但是根据C 语言标准(C99)使用头文件 `<stdbool.h>` 就可以定义布尔类型

---

**整数类型**:

| 类型           | 存储大小    | 值范围                                               |
| -------------- | ----------- | ---------------------------------------------------- |
| char           | 1 字节      | -128 到 127 或 0 到 255                              |
| unsigned char  | 1 字节      | 0 到 255                                             |
| signed char    | 1 字节      | -128 到 127                                          |
| int            | 2 或 4 字节 | -32,768 到 32,767 或 -2,147,483,648 到 2,147,483,647 |
| unsigned int   | 2 或 4 字节 | 0 到 65,535 或 0 到 4,294,967,295                    |
| short          | 2 字节      | -32,768 到 32,767                                    |
| unsigned short | 2 字节      | 0 到 65,535                                          |
| long           | 4 字节      | -2,147,483,648 到 2,147,483,647                      |
| unsigned long  | 4 字节      | 0 到 4,294,967,295                                   |

默认为10进制，10
以0开头为8进制，045
以0b开头为2进制，0b11101101
以0x开头为16进制，0x21458adf

**浮点类型**:

| 类型        | 存储大小 | 值范围                 | 精度        |
| ----------- | -------- | ---------------------- | ----------- |
| float       | 4 字节   | 1.2E-38 到 3.4E+38     | 6 位有效位  |
| double      | 8 字节   | 2.3E-308 到 1.7E+308   | 15 位有效位 |
| long double | 16 字节  | 3.4E-4932 到 1.1E+4932 | 19 位有效位 |

可以用小数表示，如：0.0012
也可以用科学计数法，E指10的次方，如：1.2E-3

---

**类型转换**:

类型转换是将一个数据类型的值转换为另一种数据类型的值。

C 语言中有两种类型转换：

- **隐式类型转换：** 隐式类型转换是在表达式中自动发生的，无需进行任何明确的指令或函数调用。它通常是将一种较小的类型自动转换为较大的类型，例如，将int类型转换为long类型或float类型转换为double类型。可能会导致数据精度丢失或数据截断。
- **显式类型转换：** 显式类型转换需要使用强制类型转换运算符（type casting operator），它可以将一个数据类型的值强制转换为另一种数据类型的值。强制类型转换可以使程序员在必要时对数据类型进行更精确的控制，但也可能会导致数据丢失或截断。

### 变量、常量

### 运算符

### 语句

#### 条件语句

#### 循环语句

### 函数

### 指针

**指针变量是用来存放内存地址的变量**
（1）可以提高程序的编译效率和执行速度，使程序更加简洁。
（2）通过指针被调用函数可以向调用函数处返回除正常的返回值之外的其他数据，从而实现两者间的双向通信。
（3）利用指针可以实现动态内存分配。
（4）指针还用于表示和实现各种复杂的数据结构，从而为编写出更加高质量的程序奠定基础。
（5）利用指针可以直接操纵内存地址，从而可以完成和汇编语言类似的工作。
（6）更容易实现函数的编写和调用
指针灵活性很大，后果就是太容易误用，造成飞指针，导致程序崩溃。

必须在使用指针存储其他变量地址之前，对其进行声明：

```c
int* ip;       /* 一个整型的指针 */
double* dp;    /* 一个 double 型的指针 */
float* fp;     /* 一个浮点型的指针 */
char* ch;      /* 一个字符型的指针 */

int func(int x, int y);
int(* funcp)(int, int);   // 一个函数指针 直接int(* funcp)()也行
funcp(1, 2); // 调用函数，与func(1, 2)相同
```

`&` 符号的意思是取地址，也就是返回一个对象在内存中的地址。
`*` 符号的意思是取得一个指针所指向的对象。 也就是如果一个指针保存着一个内存地址，那么它就返回在那个地址的对象。

```c
#include <stdio.h>
#include <windows.h>
 
int main() {
    SetConsoleOutputCP(65001); // 设置控制台程序输出的代码页编码为utf-8

    int a = 10;
    int* p; // int* 是指针变量的类型，而后面的p才是变量名，变量p用来存储地址
    int** p1;  // 二重指针 也可写成int **p1;
    int*** p2;
    // 可以简写为 int *p, **p1,***p2;
    p = &a;  
    p1 = &p;
    p2 = &p1;

    printf("a变量的地址:%p\n", p);
    printf("p指针的地址:%p\n", p1);
    printf("p1指针的地址:%p\n", p2);

    return 0;
}
```

![指针](image/c/指针.svg)

在变量声明的时候，如果没有确切的地址可以为指针变量赋一个NULL(0)值。赋为NULL值的指针被称为空指针。
如果指针为空值（零值），则假定它不指向任何存储空间。

### 标准库

`#include <stdio.h>`告诉 C 编译器在实际编译之前要包含 stdio.h 文件

### 小寄巧

`x <<= 1 //x *= 2`
`x >>= 1 //x /= 2`
`x = (x << 1) + (x << 3) //x *= 10`

`a^=b,b^=a,a^=b //swap(a,b)`

`for(int i=7;i>=0;--i)cout << (x>>i&1)`

`a^b //a!=b`

`char ch = x ^ 48//x-'0'`

`&1//%2`

因为c中\代表该行未结束，所以会把下一行给注释掉

```c
#include <stdio.h>

int main() {
    // 这是一段注释 C:\
   printf("Hello, World! \n");
   return 0;
}
```
