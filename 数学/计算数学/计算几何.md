# 计算几何

- 数学上的概念是完美的，点可以精确表达，而现实世界中很难做到真正的精准。比如计算机领域的浮点数精度总是有限的，一个float占32bit，顶天也就能表达 $2^{32}$ 个不同的值，而坐标轴上任意区间内就有无数个有理数，所以精确表达是不可能的，这会引入许多新问题。
- 算法不仅重视问题能否解决，也同样重视解决的效率。实际应用中的数据的量级可能是成千上万的， $O(n^{2})$ 和 $O(n log n)$ 的差距也会急剧放大，一个低效的算法在工程实践中可能根本无法落地。因此对算法来说，能求解但低效 ≈ 不能求解。

## 二维计算几何

由于计算几何经常进行 `double` 类型的浮点数计算，因此带来了精度问题和时间问题。
有些问题，例如求点坐标均为整数的三角形面积，可以利用其特殊性进行纯整数计算，避免用浮点数影响精度。
由于浮点数计算比整数计算慢，所以需要注意程序的常数因子给时间带来的影响。

### 图形的记录

点
在平面直角坐标系下，点用坐标表示，记录其横纵坐标值
在极坐标系下，用极坐标表示，记录其极径与极角

向量
由于向量的坐标表示与点相同，所以只需要像点一样存向量即可（当然点不是向量）

直线与射线
记录直线上一点和直线的方向向量

线段
记录左右端点

多边形
按一定顺序记录多边形的每个顶点

曲线
一些特殊曲线，如函数图像等一般记录其解析式。对于圆，直接记录其圆心和半径即可

### 定理

正弦定理
在三角形 $\triangle \text{ABC}$ 中，若角 $A,B,C$ 所对边分别为 $a,b,c$，则有：

$$ \frac{a}{\sin A}=\frac{b}{\sin B}=\frac{c}{\sin C}=2R $$

其中，$R$ 为 $\triangle \text{ABC}$ 的外接圆半径。

余弦定理
在三角形 $\triangle \text{ABC}$ 中，若角 $A,B,C$ 所对边分别为 $a,b,c$，则有：

$$ \begin{aligned} a^2&=b^2+c^2-2bc\cos A\\ b^2&=a^2+c^2-2ac\cos B\\ c^2&=a^2+b^2-2ab\cos C \end{aligned} $$

### 基本操作

#### 判断一个点在直线的哪边

我们有直线上的一点 $P$ 的直线的方向向量 $\mathbf v$，想知道某个点 $Q$ 在直线的哪边。

我们利用向量积的性质，算出 $\overrightarrow {PQ}\times \mathbf v$。如果向量积为负，则 $Q$ 在直线上方，如果向量积为 $0$，则 $Q$ 在直线上，如果向量积为正，则 $Q$ 在直线下方。

#### 判断两条线段是否相交
首先特判一些特殊情况。如果两线段平行，自然不能相交。这种情况通过判断线段所在直线的斜率是否相等即可。
当然，如果两线段重合或部分重合，只需要判断是否有三点共线的情况即可。
如果两线段的交点为其中一条线段的端点，仍然判断是否有三点共线的情况即可。
规定「一条线段的区域」为以这条线段为对角线的，各边均与某一坐标轴平行的矩形所占的区域，那么可以发现，如果两条线段没有公共区域，则这两条线段一定不相交。
于是可以快速地判断出来这两条线段不相交。这就是 **快速排斥实验**
因为两线段 $a,b$ 相交，$b$ 线段的两个端点一定分布在 $a$ 线段所在直线两侧；同理，$a$ 线段的两个端点一定分布在 $b$ 线段所在直线两侧。我们可以直接判断一条线段的两个端点相对于另一线段所在直线的位置关系，如果不同，则两线段相交，反之则不相交。如上一节所说，直线与点的位置关系我们可以利用向量积判断。
这就是 **跨立实验**，如果对于两线段 $a,b$，$b$ 线段的两个端点分布在 $a$ 线段所在直线的两侧，且  $a$ 线段的两个端点分布在 $b$ 线段所在直线的两侧，我们就说 $a,b$ 两线段 通过了跨立实验，即两线段相交。
注意到当两条线段共线但不相交时也可以通过跨立实验，因此想要准确判断还需要与快速排斥实验结合。

#### 判断一点是否在任意多边形内部

#### 求两条直线的交点

#### 求任意多边形的周长和面积

#### 圆与直线相关

